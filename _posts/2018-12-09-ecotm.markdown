---
layout: paper-summary
title:  "EcoTM: Conflict-Aware Economical Unbounded Hardware Transactional Memory"
date:   2018-12-09 23:41:00 -0500
categories: paper
paper_title: "EcoTM: Conflict-Aware Economical Unbounded Hardware Transactional Memory"
paper_link: https://www.sciencedirect.com/science/article/pii/S1877050913003335
paper_keyword: EcoTM; HTM; Directory
paper_year: ICCS 2013
rw_set: L1/Sepcial Hardware
htm_cd: Eager
htm_cr: Lazy
version_mgmt: Lazy
---

This paper proposes EcoTM, an HTM design that performs conflict detection using a hierarchy of 
conflict maps. In a classical Eager-Lazy HTM, conflicts are detected on a distributed manner, 
usually as a side-effect of cache coherence: Transactionally accessed cache lines are marked 
by the local L1/L2 cache, and conflicting accesses are detected as a coherence message is issued
by another processor. This scheme, simple as it is, faces several challenges that must be addressed 
by a more practical HTM design. First, transactional states will be lost when speculative cache lines 
are evicted. A simple solution is to always declare conflict after an overflow, with high probablity
of false positives. Second, conflicts are resolved eagerly. A consequence of this is that the transaction
that aborts another one might itself be aborted, making the first abort unnecessary. Finally, a
substantial amount of metadata has to be stored in the cache, if unbounded transactions are to be supported.
The amount of metadata is propotional to the largest of transactions supported, while in practice only
a small fraction of them will actually be used for conflict detection.

EcoTM solves the above problems by using a hierarchy of metadata storage, assuming that actual conflicting cache lines
are only a small portion of the total number of transactional cache lines. Under this assumption, not all 
metadata are treated equally. Instead, only metadata that is most recently used will be cached in a small
structure which allows fast accessing, while the majority of them stays in a distibuted manner and can be 
requested only at certain cases.

