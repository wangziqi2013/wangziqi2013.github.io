---
layout: paper-summary
title:  "Exploiting Inter-block Entropy to Enhance the Compressibility of Blocks with Diverse Data"
date:   2022-07-13 05:14:00 -0500
categories: paper
paper_title: "Exploiting Inter-block Entropy to Enhance the Compressibility of Blocks with Diverse Data"
paper_link: https://ieeexplore.ieee.org/document/9773200
paper_keyword: Memory Compression; EPC; Pattern-Based Compression; Attache
paper_year: HPCA 2022
rw_set:
htm_cd:
htm_cr:
version_mgmt:
---

This paper proposes Entropy-Based Pattern Compression (EPC), a novel main memory compression and decompression
pipeline that utilizes global common patterns for higher compression ratio than single-block compression.
The proposed design compresses memory blocks to be stored in the DRAM using a pattern table, which is trained
from the data stream being written into DRAM earlier. This leverages global pattern information, and enables 
compression to work using inter-block redundancy.
The pattern table stores common bit patterns that are found in the data blocks, and compression works by replacing
the same pattern in the incoming block with indices to the pattern table entries.
Furthermore, the paper proposes three optimizations in the compression pipeline for transforming data words,
hence increasing the chances that incoming data blocks can be compressed using the pattern table.

The EPC design uses the Attache architecture to store compressed blocks in DRAM internal rows and to track metadata.
To elaborate: The attache design divides a DRAM row into two sub-rows (sub-ranks) that can be activated 
separately. If two consecutive rows are compressed to less than or equal to 30 bytes, then the two rows are able 
to be stored within only one single row, and can be accessed separately by activating different ranks, hence doubling 
the bandwidth if both lines are accessed.
Rows that cannot be compressed to <= 30 bytes remain uncompressed, and are stored in the 
first rank of the original row.
Each compressed row also has a 2-byte magic marker prefixing the actual compressed content. The magic marker 
is used by the DRAM controller to distinguish between a compressed row stored in a sub-rank, and an uncompressed row.
In the rare case where the magic marker conflicts with the first two bytes of an uncompressed row, 
an extra bit per row is used to further indicate whether the magic op is a result of value aliasing, or indicates 
an actual compressed row. The extra bit is stored in a dedicated region in the DRAM, only constitutes a small
fraction of total storage, and is only accessed rarely.
Note that the attache design only aims at increasing DRAM access bandwidth, rather than saving any physical storage,
and so does EPC.

EPC extends attache by adopting a different compression and decompression pipeline that utilizes global pattern
information.
The compression pipeline consists of four stages that process input data in the unit of 64-byte words.
In the first stage, the compressor identifies the data types stored in the 64-byte word.
The paper lists several combinations of narrow integer values, pointer values, and floating point values, each
with a different number of "high entropy" lower bits. 
